# 需求分析和设计

业务规则：
- 菜品名称必须是唯一的
- 菜品必须属于某个分类下 不能单独存在
- 新增菜品时可以根据情况选择菜品的口味
- 每个菜品必须对应一张图片
## 接口设计-根据类型查询分类（已完成）
- 基本信息
	- Path： /admin/category/list
	- Method:GET
- 请求参数
	Query

| 参数名称 | 是否必须 | 示例  | 备注                 |
| ---- | ---- | --- | ------------------ |
| type | 否    | 2   | 分类类型：1为菜品分类 2为套餐分类 |
- 返回数据

| 名称            | 类型      | 是否必须 | 默认值 | 备注  | 其他信息             |
| ------------- | ------- | ---- | --- | --- | ---------------- |
| code          | integer | 必须   |     |     | format:int32     |
| data          | object  | 必须   |     |     | item 类型：object   |
| ├─ id         | integer | 必须   |     |     | format:int64     |
| ├─ name       | string  | 必须   |     |     |                  |
| ├─ type       | string  | 必须   |     |     | format:int32     |
| ├─ sort       | string  | 必须   |     |     | format:int32     |
| ├─ createTime | string  | 必须   |     |     | format:date-time |
| ├─ updateTime | string  | 必须   |     |     | format:date-time |
| ├─ createUser | integer | 必须   |     |     | format:int64     |
| ├─ updateUser | integer | 必须   |     |     | format:int64     |
| msg           | string  | 必须   |     |     |                  |
	
## 接口设计-文件上传
- 基本信息
	- Path： /admin/category/list
	- Method:GET
- 请求参数
	Headers

| 参数名称         | 参数值                 | 是否必须 | 示例  | 备注  |
| ------------ | ------------------- | ---- | --- | --- |
| Content-type | multipart/form-data | 是    |     |     |
form-data 是浏览器文件上传的一种固定形式
- 返回数据

| 名称   | 类型      | 是否必须 | 备注     | 其他信息         |
| ---- | ------- | ---- | ------ | ------------ |
| code | integer | 必须   |        | format:int32 |
| data | string  | 必须   | 文件上传路径 |              |
| msg  | string  | 非必须  |        |              |
文件上传采用阿里云oss对象存储

## 接口设计-新增菜品
- 基本信息
	- Path:/admin/dish
	- Method:POST
- 请求参数
	Headers

| 参数名称         | 参数值              | 是否必须 | 示例  | 备注  |
| ------------ | ---------------- | ---- | --- | --- |
| Content-type | application/json | 是    |     |     |
	Body

| 名称          | 类型       | 是否必须 | 默认值 | 备注             | 其他信息           |
| ----------- | -------- | ---- | --- | -------------- | -------------- |
| categoryId  | integer  | 必须   |     | 分类id           | format:int64   |
| description | string   | 必须   |     | 菜品描述           |                |
| flavors     | object[] | 非必须  |     | 口味             | item 类型：object |
| ├─ dishId   | integer  | 非必须  |     | 菜品id           | format:int64   |
| ├─ id       | integer  | 必须   |     | 口味id           | format:int64   |
| ├─ name     | string   | 必须   |     | 口味名称           |                |
| ├─ value    | string   | 必须   |     | 口味值            |                |
| id          | integer  | 非必须  |     | 菜品id           | format:int64   |
| image       | integer  | 必须   |     | 菜品图片路径         |                |
| name        | string   | 必须   |     | 菜品名称           |                |
| price       | number   | 必须   |     | 菜品价格           |                |
| status      | integer  | 非必须  |     | 菜品状态：1为起售，0为停售 | format:int32   |
- 返回数据

| 名称   | 类型      | 是否必须 | 备注  | 其他信息         |
| ---- | ------- | ---- | --- | ------------ |
| code | integer | 必须   |     | format:int32 |
| data | object  | 非必须  |     |              |
| msg  | string  | 非必须  |     |              |
## 数据库设计

[[数据库设计文档#^0b4642|dish表]] 和 [[数据库设计文档#^a4b087| dish_flavor表]]
# 代码开发-开发文件上传接口

浏览器 $\rightarrow$ 后端服务$\rightarrow$ 阿里云OSS(这里不做oss开发 存储到本地)