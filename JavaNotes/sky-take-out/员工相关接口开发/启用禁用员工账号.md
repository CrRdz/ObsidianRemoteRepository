# 需求分析和设计

业务规则：
- 可以对状态为“启用”的员工进行“禁用”操作
- 可以对状态为“禁用”的员工进行“启用”操作
- 状态为禁用的员工不能登录系统
## 接口设计
- 基本信息
	- Path: /admin/employee/status/{status}
	- Method: POST
- 接口参数
	Headers

| 参数名称         | 参数值              | 是否必须 | 示例  | 备注  |
| ------------ | ---------------- | ---- | --- | --- |
| Content-Type | application/json | 是    |     |     |
	路径参数
	
| 参数名称   | 示例  | 备注            |
| ------ | --- | ------------- |
| status | 1   | 状态， 1为启用 0为禁用 |
	Query
	
| 参数名称 | 是否必须 | 示例  | 备注   |
| ---- | ---- | --- | ---- |
| id   | 是    |     | 员工id |
- 返回数据

| 名称   | 类型      | 是否必须 | 默认值 | 备注  | 其他信息 |
| ---- | ------- | ---- | --- | --- | ---- |
| code | integer | 必须   |     |     |      |
| data | string  | 非必须  |     |     |      |
| msg  | string  | 非必须  |     |     |      |
# 代码开发

## EmployeeController
```java
/**  
 * 启用禁用员工账号  
 * @param status  
 * @param id  
 * @return  
 */  
@PostMapping("/status/{status}")  
@ApiOperation("启用禁用员工账号")  
public Result startOrStop(@PathVariable("status") Integer status, Long id) {  
    log.info("启用禁用员工账号:{},{}",status,id);  
    employeeService.startOrStop(status,id);  
    return Result.success();  
}
```

`@PathVariable (路径参数)`:
用于获取 URL 路径中的变量。
设计理念: 这里的 status 和 id 被视为资源本身的一部分。
URL 样式: /admin/employee/status/1/10 (假设路径映射是 /admin/employee/status/{status}/{id})。
语义: 这种风格更清晰地指代明确的资源层级关系。比如 "将 ID 为 10 的员工状态改为 1"。
`@RequestParam (查询参数)`:
用于获取 URL ? 后面的键值对参数。
设计理念: 这里的变量通常作为过滤条件或附加控制参数。
URL 样式: /admin/employee/status?status=1&id=10。
语义: "对员工状态资源进行操作，参数是 status=1 和 id=10"

## `EmployeeService`

```java
/**  
 * 启用或禁用员工账号  
 * @param status  
 * @param id  
 */  
void startOrStop(Integer status, Long id);
```

## `EmployeeServiceImpl`

```java
/**  
 * 启用或禁用员工账号  
 * @param status  
 * @param id  
 */  
@Override  
public void startOrStop(Integer status, Long id) {  
    // update employee set status = ? where id = ?  
    /*Employee employee = new Employee();    
    employee.setId(id);    
    employee.setStatus(status);*/  
    
    Employee employee = Employee.builder()  
            .id(id)  
            .status(status)  
            .build();  
  
    employeeMapper.update(employee);  
}
```

## `EmployeeMapper`

```java
/**  
 * 根据逐渐动态修改属性  
 * @param employee  
 */  
void update(Employee employee);
```

## `EmployeeMapper.xml`

```xml
    <update id="update" parameterType="Employee">  
        update employee  
        <set>  
            <if test="name != null">name = #{name},</if>  
            <if test="username != null">username = #{username},</if>  
            <if test="password != null">password = #{password},</if>  
            <if test="phone != null">phone = #{phone},</if>  
            <if test="sex != null">sex = #{sex},</if>  
            <if test="idNumber != null">id_Number = #{idNumber},</if>  
            <if test="updateTime != null">update_Time = #{updateTime},</if>  
            <if test="updateUser != null">update_User = #{updateUser},</if>  
            <if test="status != null">status = #{status},</if>  
        </set>  
        where id = #{id}  
    </update>  
```

# 功能测试
前后端联调 + Swagger接口文档测试
